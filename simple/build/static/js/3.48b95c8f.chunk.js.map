{"version":3,"sources":["utils/url.js","utils/request.js","utils/SHA1.js","utils/date.js","components/PostEditor.js","images/like.png","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","components/PostView.js","components/CommentsView.js","components/CommentList.js","components/Post.js"],"names":["postListFilter","fields","limit","order","include","includefilter","user","encodeFilter","filter","encodeURIComponent","JSON","stringify","__webpack_exports__","login","getPostList","concat","getPostById","id","where","postByIdFilter","createPost","updatePost","getCommentList","postId","post","commentListFilter","createComment","__webpack_require__","d","get","put","now","Date","secureAppKey","msg","rotate_left","n","s","cvt_hex","val","i","str","toString","blockstart","j","A","B","C","D","E","temp","W","Array","H0","H1","H2","H3","H4","msg_len","string","replace","utftext","length","c","charCodeAt","String","fromCharCode","Utf8Encode","word_array","push","toLowerCase","SHA1","AppId","headers","Headers","X-APICloud-AppId","X-APICloud-AppKey","Accept","Content-Type","url","fetch","method","then","response","handleResponse","catch","err","console","error","message","data","body","status","json","statusText","getFormatDate","utc","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","PostEditor","props","_this","Object","F_react_simple_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","F_react_simple_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_react_simple_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","title","content","handleCancelClick","bind","F_react_simple_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","handleSaveClick","handleChange","e","name","target","setState","value","log","onSave","onCancel","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","type","onChange","placeholder","contnet","onClick","Component","module","exports","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","_objectSpread","arguments","source","ownKeys","keys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","forEach","PostView","editable","onEditClick","react_default","author","username","updatedAt","alt","src","like","vote","CommentList","comments","map","item","classCallCheck","possibleConstructorReturn","getPrototypeOf","assertThisInitialized","handleClick","onSubmit","alert","_this$props","components_CommentsView","Post","editing","handleEditClick","handleCommentSubmit","handlePostSave","handlePostCnacel","refreshCommments","refreshPost","_this2","match","params","_this3","savePost","comment","userId","saveComment","_this4","_this5","newPost","objectSpread","_this$state","components_PostView","components_CommentList","Boolean"],"mappings":"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","file":"static/js/3.48b95c8f.chunk.js","sourcesContent":["// 获取帖子列表的过滤条件\nconst postListFilter = {\n  fields: [\"id\", \"title\", \"author\", \"vote\", \"updatedAt\"],\n  limit: 10,\n  order: \"updatedAt DESC\",\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n};\n\n// 获取帖子详情的过滤条件\nconst postByIdFilter = id => ({\n  fields: [\"id\", \"title\", \"author\", \"vote\", \"updatedAt\", \"content\"],\n  where: { id: id },\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n});\n\n// 获取评论列表的过滤条件\nconst commentListFilter = postId => ({\n  fields: [\"id\", \"author\", \"updatedAt\", \"content\"],\n  where: { post: postId },\n  limit: 20,\n  order: \"updatedAt DESC\",\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n});\n\nfunction encodeFilter(filter) {\n  return encodeURIComponent(JSON.stringify(filter));\n}\n\nexport default {\n  // 登录\n  login: () => \"/user/login\",\n  // 获取帖子列表\n  getPostList: () => `/post?filter=${encodeFilter(postListFilter)}`,\n  // 获取帖子详情\n  getPostById: id => `/post?filter=${encodeFilter(postByIdFilter(id))}`,\n  // 新建帖子\n  createPost: () => \"/post\",\n  // 修改帖子\n  updatePost: id => `/post/${id}`,\n  // 获取评论列表\n  getCommentList: postId =>\n    `/comment?filter=${encodeFilter(commentListFilter(postId))}`,\n  // 新建评论  \n  createComment: () => \"/comment\"\n};\n","import {SHA1} from \"./SHA1\";\n\nconst AppId = \"A6053788184630\";\nconst AppKey = \"8B3F5860-2646-2C47-DC50-39106919B260\";\nvar now = Date.now();\nconst secureAppKey = SHA1(AppId+\"UZ\"+AppKey+\"UZ\"+now)+\".\"+now;\n\nconst headers = new Headers({\n  \"X-APICloud-AppId\": AppId,\n  \"X-APICloud-AppKey\": secureAppKey,\n  \"Accept\": \"application/json\",\n  \"Content-Type\": \"application/json\"\n});\n\nfunction get(url) {\n  return fetch(url, {\n    method: \"GET\",\n    headers: headers,\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction post(url, data) {\n  return fetch(url, {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify(data)\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction put(url, data) {\n  return fetch(url, {\n    method: \"PUT\",\n    headers: headers,\n    body: JSON.stringify(data)\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction handleResponse(url, response) {\n  if(response.status < 500){\n    return response.json();\n  }else{\n    console.error(`Request failed. Url = ${url} . Message = ${response.statusText}`);\n    return {error: {message: \"Request failed due to server error \"}};\n  }\n}\n\nexport {get, post, put}","/* eslint-disable */\n/**\n *\n *  Secure Hash Algorithm (SHA1)\n *\n **/\nexport function SHA1(msg) {\n  function rotate_left(n, s) {\n    var t4 = (n << s) | (n >>> (32 - s));\n    return t4;\n  }\n\n  function lsb_hex(val) {\n    var str = \"\";\n    var i;\n    var vh;\n    var vl;\n\n    for (i = 0; i <= 6; i += 2) {\n      vh = (val >>> (i * 4 + 4)) & 0x0f;\n      vl = (val >>> (i * 4)) & 0x0f;\n      str += vh.toString(16) + vl.toString(16);\n    }\n    return str;\n  }\n\n  function cvt_hex(val) {\n    var str = \"\";\n    var i;\n    var v;\n\n    for (i = 7; i >= 0; i--) {\n      v = (val >>> (i * 4)) & 0x0f;\n      str += v.toString(16);\n    }\n    return str;\n  }\n\n  function Utf8Encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if (c > 127 && c < 2048) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      } else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n\n    return utftext;\n  }\n\n  var blockstart;\n  var i, j;\n  var W = new Array(80);\n  var H0 = 0x67452301;\n  var H1 = 0xefcdab89;\n  var H2 = 0x98badcfe;\n  var H3 = 0x10325476;\n  var H4 = 0xc3d2e1f0;\n  var A, B, C, D, E;\n  var temp;\n\n  msg = Utf8Encode(msg);\n\n  var msg_len = msg.length;\n\n  var word_array = new Array();\n  for (i = 0; i < msg_len - 3; i += 4) {\n    j =\n      (msg.charCodeAt(i) << 24) |\n      (msg.charCodeAt(i + 1) << 16) |\n      (msg.charCodeAt(i + 2) << 8) |\n      msg.charCodeAt(i + 3);\n    word_array.push(j);\n  }\n\n  switch (msg_len % 4) {\n    case 0:\n      i = 0x080000000;\n      break;\n    case 1:\n      i = (msg.charCodeAt(msg_len - 1) << 24) | 0x0800000;\n      break;\n\n    case 2:\n      i =\n        (msg.charCodeAt(msg_len - 2) << 24) |\n        (msg.charCodeAt(msg_len - 1) << 16) |\n        0x08000;\n      break;\n\n    case 3:\n      i =\n        (msg.charCodeAt(msg_len - 3) << 24) |\n        (msg.charCodeAt(msg_len - 2) << 16) |\n        (msg.charCodeAt(msg_len - 1) << 8) |\n        0x80;\n      break;\n  }\n\n  word_array.push(i);\n\n  while (word_array.length % 16 != 14) word_array.push(0);\n\n  word_array.push(msg_len >>> 29);\n  word_array.push((msg_len << 3) & 0x0ffffffff);\n\n  for (blockstart = 0; blockstart < word_array.length; blockstart += 16) {\n    for (i = 0; i < 16; i++) W[i] = word_array[blockstart + i];\n    for (i = 16; i <= 79; i++)\n      W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n    A = H0;\n    B = H1;\n    C = H2;\n    D = H3;\n    E = H4;\n\n    for (i = 0; i <= 19; i++) {\n      temp =\n        (rotate_left(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5a827999) &\n        0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 20; i <= 39; i++) {\n      temp =\n        (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ed9eba1) & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 40; i <= 59; i++) {\n      temp =\n        (rotate_left(A, 5) +\n          ((B & C) | (B & D) | (C & D)) +\n          E +\n          W[i] +\n          0x8f1bbcdc) &\n        0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 60; i <= 79; i++) {\n      temp =\n        (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0xca62c1d6) & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    H0 = (H0 + A) & 0x0ffffffff;\n    H1 = (H1 + B) & 0x0ffffffff;\n    H2 = (H2 + C) & 0x0ffffffff;\n    H3 = (H3 + D) & 0x0ffffffff;\n    H4 = (H4 + E) & 0x0ffffffff;\n  }\n\n  var temp =\n    cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);\n\n  return temp.toLowerCase();\n}\n","export function getFormatDate(utc) {\n  const date = new Date(utc);\n  const year = date.getFullYear();\n  let month = date.getMonth() + 1 + \"\";\n  month = month.length === 1 ? \"0\" + month : month;\n  let day = date.getDate() + \"\";\n  day = day.length === 1 ? \"0\" + day : day;\n  let hour = date.getHours() + \"\";\n  hour = hour.length === 1 ? \"0\" + hour : hour;\n  let minute = date.getMinutes() + \"\";\n  minute = minute.length === 1 ? \"0\" + minute : minute;\n  return `${year}-${month}-${day} ${hour}:${minute}`;\n}","import React, { Component } from 'react'\r\n\r\nclass PostEditor extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const { post } = this.props\r\n    this.state = {\r\n      title: (post && post.title) || '',\r\n      content: (post && post.content) || ''\r\n    }\r\n    this.handleCancelClick = this.handleCancelClick.bind(this)\r\n    this.handleSaveClick = this.handleSaveClick.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n  }\r\n\r\n  //处理帖子的编辑信息\r\n  handleChange(e) {\r\n    const name = e.target.name\r\n    if (name === 'title') {\r\n      this.setState({\r\n        title: e.target.value\r\n      })\r\n    } else if (name === 'content') {\r\n      this.setState({\r\n        content: e.target.value\r\n      })\r\n    } else {\r\n      console.log('do nothing')\r\n    }\r\n  }\r\n  // 保存帖子\r\n  handleSaveClick() {\r\n    const data = { title: this.state.title, content: this.state.content }\r\n    // // 调用父组件的回调函数执行真正的保存逻辑\r\n    this.props.onSave(data)\r\n  }\r\n  // 取消帖子的编辑\r\n  handleCancelClick() {\r\n    this.props.onCancel()\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"postEditor\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={this.state.title}\r\n          onChange={this.handleChange}\r\n        />\r\n        <textarea\r\n          name=\"content\"\r\n          placeholder=\"内容\"\r\n          value={this.state.contnet}\r\n          onChange={this.handleChange}\r\n        />\r\n        <button onClick={this.handleCancelClick}>取消</button>\r\n            <button onClick={this.handleSaveClick} className=\"editor-save\">保存</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PostEditor\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABzUlEQVRYR+2XQU7CUBCGZ4otKw3uTLQENtquxBPIDcQTqDfQE4gnUG6AJxBPIJ5AdkU3GoqJO4Gd7wljWorQvrapQh8xsds2M9/88978U4QlP7jk/PD3AaytlTIqeOMoSSM6NLufzZ+oOrcCVl6rIsD5OCn1sgNeLPaglxRifgBdbSLi/jQhnRkdfiUNoK2rLUDc/U5IcGvYrCIF4GlTLY0y+DCbjIjuTZuXpQBYulpHxKOlAIRV7x5DGQo85yD3saY50hcEqUdUM7r8NNUWWMLJn6ZDGh7u2MNGKgBO5WxVvSTE46gExFjRfIOXXwE4U01RlJk7PQ6jDVjNGS5tXWsAwkFccASoxr2fxJp84xtE0dKOh0uc9EkrhsAZ8QP4xurMbAO4MDusuhCAwKCSDkBeMeEtkKBA8JbIVyBwS3wAj3qmQphxvd03Xhd2BqhvdHhuNrZfAXe5UO5SAwhxSrkAIO4KUgGUIe1tv/JWZAs8k3lPpwVi/508wkrWzmuUBgARXZs2FzxEJsCJafN6sDhpANkBWw/blkWA4JLpbDneHEjihqGmFLOohgCEWa7nhhtQANXdAwXLjnZD6hPjpagdYe7/gsQ2HPHhP8AXr5kcMA++kXUAAAAASUVORK5CYII=\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import React from \"react\";\r\nimport { getFormatDate } from \"../utils/date\";\r\nimport \"../sass/postView.scss\";\r\nimport like from \"../images/like.png\";\r\n// 单个帖子的展示\r\nfunction PostView(props) {\r\n    console.log(props)\r\n    const { post, editable, onEditClick } = props;\r\n    return (\r\n        <div className=\"postView\">\r\n            <div>\r\n                <h2>{post.title}</h2>\r\n                <div className=\"mark\">\r\n                    <span className=\"author\">{post.author.username}</span>\r\n                    <span>·</span>\r\n                    <span>{getFormatDate(post.updatedAt)}</span>\r\n                    {editable ? (\r\n                        <span>\r\n                            ·<button onClick={onEditClick}>编辑</button>\r\n                        </span>\r\n                    ) : null}\r\n                </div>\r\n                <div className=\"content\">{post.content}</div>\r\n            </div>\r\n            <div className=\"vote\">\r\n                <span>\r\n                    <img alt=\"vote\" src={like} />\r\n                </span>\r\n                <span>{post.vote}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostView;\r\n","import React, { Component } from 'react'\r\nimport { getFormatDate } from '../utils/date'\r\nimport '../sass/CommentsView.scss'\r\n// 用于显示评论内容的组件\r\nclass CommentList extends Component {\r\n  render() {\r\n    const { comments } = this.props\r\n    console.log(comments)\r\n    return (\r\n      <ul className=\"commentsView\">\r\n        {comments.map(item => {\r\n          console.log(item.author)\r\n\r\n          return (\r\n            <li key={item.id}>\r\n              <div>{item.content}</div>\r\n              <div className=\"sub\">\r\n                {item.author ? (\r\n                  <span>{item.author.username}</span>\r\n                ) : (\r\n                  <span>匿名</span>\r\n                )}\r\n                <span>•</span>\r\n                <span>{getFormatDate(item.updatedAt)}</span>\r\n              </div>\r\n            </li>\r\n          )\r\n        })}\r\n      </ul>\r\n    )\r\n  }\r\n}\r\nexport default CommentList\r\n","import React, { Component } from 'react'\r\nimport CommentsView from './CommentsView'\r\n\r\nimport '../sass/CommentList.scss'\r\n// 用于显示评论列表的组件\r\nclass CommentList extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: ''\r\n    }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n  //处理新评论内容的变化\r\n  handleChange(e) {\r\n    this.setState({\r\n      value: e.target.value\r\n    })\r\n  }\r\n  //保存新评论\r\n  handleClick(e) {\r\n    const content = this.state.value\r\n    if (content.length > 0) {\r\n      this.props.onSubmit(this.state.value)\r\n      this.setState({\r\n        value: ''\r\n      })\r\n    } else {\r\n      alert('评论内容不能为空！ ')\r\n    }\r\n  }\r\n  render() {\r\n    const { comments, editable } = this.props\r\n    return (\r\n      <div className=\"commentList\">\r\n        {/* 只有登录状态， 才允许新建评论 */}\r\n\r\n        <div className=\"title\">\r\n                <div className=\"comments\">评论</div>\r\n          {editable ? (\r\n            <div className=\"editor\">\r\n              <textarea\r\n                placeholder=\"说说你的看法\"\r\n                value={this.state.value}\r\n                onChange={this.handleChange}\r\n              />\r\n              <button onClick={this.handleClick}>提交</button>\r\n            </div>\r\n          ) : null}\r\n          <CommentsView comments={comments} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default CommentList\r\n","import React, { Component } from 'react'\r\nimport PostEditor from './PostEditor'\r\nimport PostView from './PostView'\r\nimport CommentList from './CommentList'\r\nimport { get, put, post } from '../utils/request'\r\nimport url from '../utils/url'\r\nimport '../sass/post.scss'\r\nclass Post extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      post: null,\r\n      comments: [],\r\n      editing: false\r\n    }\r\n    this.handleEditClick = this.handleEditClick.bind(this)\r\n    this.handleCommentSubmit = this.handleCommentSubmit.bind(this)\r\n    this.handlePostSave = this.handlePostSave.bind(this)\r\n    this.handlePostCnacel = this.handlePostCnacel.bind(this)\r\n    this.refreshCommments = this.refreshCommments.bind(this)\r\n    this.refreshPost = this.refreshPost.bind(this)\r\n  }\r\n  componentDidMount() {\r\n    this.refreshCommments()\r\n    this.refreshPost()\r\n  }\r\n  // 获取帖子详情\r\n  refreshPost() {\r\n    const postId = this.props.match.params.id\r\n    get(url.getPostById(postId)).then(data => {\r\n      if (!data.error && data.length === 1) {\r\n        this.setState({\r\n          post: data[0]\r\n        })\r\n      }\r\n    })\r\n  }\r\n  // 获取评论列表\r\n  refreshCommments() {\r\n    const postId = this.props.match.params.id\r\n    get(url.getCommentList(postId)).then(data => {\r\n      if (!data.error) {\r\n        this.setState({\r\n          comments: data\r\n        })\r\n      }\r\n    })\r\n  }\r\n  // 让帖子处于编辑态\r\n  handleEditClick() {\r\n    this.setState({\r\n      editing: true\r\n    })\r\n  }\r\n  //保存帖子\r\n  handlePostSave(data) {\r\n    const id = this.props.match.params.id\r\n    this.savePost(id, data)\r\n  }\r\n  // 取消编辑帖子\r\n  handlePostCnacel() {\r\n    this.setState({\r\n      editing: false\r\n    })\r\n  }\r\n  //提交新建的评论\r\n  handleCommentSubmit(content) {\r\n    const postId = this.props.match.params.id\r\n    const comment = {\r\n      author: this.props.userId,\r\n      post: postId,\r\n      content: content\r\n    }\r\n    this.saveComment(comment)\r\n  }\r\n  //保存新的评论到服务器\r\n  saveComment(comment) {\r\n    post(url.createComment(), comment).then(data => {\r\n      if (!data.error) {\r\n        this.refreshCommments()\r\n      }\r\n    })\r\n  }\r\n  //同步帖子的修改到服务器\r\n  savePost(id, post) {\r\n    put(url.updatePost(id), post).then(data => {\r\n      if (!data.error) {\r\n        /* 因为返回的帖子对象只有author的id信息，\r\n         * 所有需要额外把完整的author信息合并到帖子对象中 */\r\n        const newPost = {\r\n          ...data,\r\n          author: this.state.post.author\r\n        }\r\n        this.setState({\r\n          post: newPost,\r\n          editing: false\r\n        })\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    const { post, comments, editing } = this.state\r\n    console.log(post)\r\n    const { userId } = this.props\r\n    if (!post) {\r\n      return null\r\n    }\r\n    const editable = userId === post.author.id\r\n    return (\r\n      <div className=\"post\">\r\n        {editing ? (\r\n          <PostEditor\r\n            post={post}\r\n            onSave={this.handlePostSave}\r\n            onCancel={this.handlePostCnacel}\r\n          />\r\n        ) : (\r\n          <PostView\r\n            post={post}\r\n            editable={editable}\r\n            onEditClick={this.handleEditClick}\r\n          />\r\n        )}\r\n        {/* PostView负责展示某一个帖子*/}\r\n        <CommentList\r\n          comments={comments}\r\n          editable={Boolean(userId)}\r\n          onSubmit={this.handleCommentSubmit}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Post\r\n"],"sourceRoot":""}