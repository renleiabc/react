(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{30:function(e,t,n){"use strict";var a={fields:["id","title","author","vote","updatedAt"],limit:10,order:"updatedAt DESC",include:"authorPointer",includefilter:{user:{fields:["id","username"]}}};function r(e){return encodeURIComponent(JSON.stringify(e))}t.a={login:function(){return"/user/login"},getPostList:function(){return"/post?filter=".concat(r(a))},getPostById:function(e){return"/post?filter=".concat(r(function(e){return{fields:["id","title","author","vote","updatedAt","content"],where:{id:e},include:"authorPointer",includefilter:{user:{fields:["id","username"]}}}}(e)))},createPost:function(){return"/post"},updatePost:function(e){return"/post/".concat(e)},getCommentList:function(e){return"/comment?filter=".concat(r(function(e){return{fields:["id","author","updatedAt","content"],where:{post:e},limit:20,order:"updatedAt DESC",include:"authorPointer",includefilter:{user:{fields:["id","username"]}}}}(e)))},createComment:function(){return"/comment"}}},31:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s});var a=Date.now(),r=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n}var a,r,o,c,i,s,u,l,h,d=new Array(80),f=1732584193,p=4023233417,C=2562383102,m=271733878,g=3285377520,A=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e)).length,v=new Array;for(r=0;r<A-3;r+=4)o=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),v.push(o);switch(A%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(A-1)<<24|8388608;break;case 2:r=e.charCodeAt(A-2)<<24|e.charCodeAt(A-1)<<16|32768;break;case 3:r=e.charCodeAt(A-3)<<24|e.charCodeAt(A-2)<<16|e.charCodeAt(A-1)<<8|128}for(v.push(r);v.length%16!=14;)v.push(0);for(v.push(A>>>29),v.push(A<<3&4294967295),a=0;a<v.length;a+=16){for(r=0;r<16;r++)d[r]=v[a+r];for(r=16;r<=79;r++)d[r]=t(d[r-3]^d[r-8]^d[r-14]^d[r-16],1);for(c=f,i=p,s=C,u=m,l=g,r=0;r<=19;r++)h=t(c,5)+(i&s|~i&u)+l+d[r]+1518500249&4294967295,l=u,u=s,s=t(i,30),i=c,c=h;for(r=20;r<=39;r++)h=t(c,5)+(i^s^u)+l+d[r]+1859775393&4294967295,l=u,u=s,s=t(i,30),i=c,c=h;for(r=40;r<=59;r++)h=t(c,5)+(i&s|i&u|s&u)+l+d[r]+2400959708&4294967295,l=u,u=s,s=t(i,30),i=c,c=h;for(r=60;r<=79;r++)h=t(c,5)+(i^s^u)+l+d[r]+3395469782&4294967295,l=u,u=s,s=t(i,30),i=c,c=h;f=f+c&4294967295,p=p+i&4294967295,C=C+s&4294967295,m=m+u&4294967295,g=g+l&4294967295}return(h=n(f)+n(p)+n(C)+n(m)+n(g)).toLowerCase()}("A6053788184630UZ8B3F5860-2646-2C47-DC50-39106919B260UZ"+a)+"."+a,o=new Headers({"X-APICloud-AppId":"A6053788184630","X-APICloud-AppKey":r,Accept:"application/json","Content-Type":"application/json"});function c(e){return fetch(e,{method:"GET",headers:o}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function i(e,t){return fetch(e,{method:"POST",headers:o,body:JSON.stringify(t)}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function s(e,t){return fetch(e,{method:"PUT",headers:o,body:JSON.stringify(t)}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function u(e,t){return t.status<500?t.json():(console.error("Request failed. Url = ".concat(e," . Message = ").concat(t.statusText)),{error:{message:"Request failed due to server error "}})}},32:function(e,t,n){"use strict";function a(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1+"";a=1===a.length?"0"+a:a;var r=t.getDate()+"";r=1===r.length?"0"+r:r;var o=t.getHours()+"";o=1===o.length?"0"+o:o;var c=t.getMinutes()+"";return c=1===c.length?"0"+c:c,"".concat(n,"-").concat(a,"-").concat(r," ").concat(o,":").concat(c)}n.d(t,"a",function(){return a})},33:function(e,t,n){"use strict";var a=n(5),r=n(6),o=n(8),c=n(7),i=n(9),s=n(12),u=n(1),l=n.n(u),h=function(e){function t(e){var n;Object(a.a)(this,t);var r=(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).props.post;return n.state={title:r&&r.title||"",content:r&&r.content||""},n.handleCancelClick=n.handleCancelClick.bind(Object(s.a)(Object(s.a)(n))),n.handleSaveClick=n.handleSaveClick.bind(Object(s.a)(Object(s.a)(n))),n.handleChange=n.handleChange.bind(Object(s.a)(Object(s.a)(n))),n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name;"title"===t?this.setState({title:e.target.value}):"content"===t?this.setState({content:e.target.value}):console.log("do nothing")}},{key:"handleSaveClick",value:function(){var e={title:this.state.title,content:this.state.content};this.props.onSave(e)}},{key:"handleCancelClick",value:function(){this.props.onCancel()}},{key:"render",value:function(){return l.a.createElement("div",{className:"postEditor"},l.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),l.a.createElement("textarea",{name:"content",placeholder:"\u5185\u5bb9",value:this.state.contnet,onChange:this.handleChange}),l.a.createElement("button",{onClick:this.handleCancelClick},"\u53d6\u6d88"),l.a.createElement("button",{onClick:this.handleSaveClick,className:"editor-save"},"\u4fdd\u5b58"))}}]),t}(u.Component);t.a=h},34:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABzUlEQVRYR+2XQU7CUBCGZ4otKw3uTLQENtquxBPIDcQTqDfQE4gnUG6AJxBPIJ5AdkU3GoqJO4Gd7wljWorQvrapQh8xsds2M9/88978U4QlP7jk/PD3AaytlTIqeOMoSSM6NLufzZ+oOrcCVl6rIsD5OCn1sgNeLPaglxRifgBdbSLi/jQhnRkdfiUNoK2rLUDc/U5IcGvYrCIF4GlTLY0y+DCbjIjuTZuXpQBYulpHxKOlAIRV7x5DGQo85yD3saY50hcEqUdUM7r8NNUWWMLJn6ZDGh7u2MNGKgBO5WxVvSTE46gExFjRfIOXXwE4U01RlJk7PQ6jDVjNGS5tXWsAwkFccASoxr2fxJp84xtE0dKOh0uc9EkrhsAZ8QP4xurMbAO4MDusuhCAwKCSDkBeMeEtkKBA8JbIVyBwS3wAj3qmQphxvd03Xhd2BqhvdHhuNrZfAXe5UO5SAwhxSrkAIO4KUgGUIe1tv/JWZAs8k3lPpwVi/508wkrWzmuUBgARXZs2FzxEJsCJafN6sDhpANkBWw/blkWA4JLpbDneHEjihqGmFLOohgCEWa7nhhtQANXdAwXLjnZD6hPjpagdYe7/gsQ2HPHhP8AXr5kcMA++kXUAAAAASUVORK5CYII="},35:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}n.d(t,"a",function(){return r})},47:function(e,t,n){"use strict";n.r(t);var a=n(35),r=n(5),o=n(6),c=n(8),i=n(7),s=n(9),u=n(12),l=n(1),h=n.n(l),d=n(44),f=n(32),p=n(34),C=n.n(p);var m=function(e){var t=e.post;return h.a.createElement("li",{className:"postItem"},h.a.createElement("div",{className:"title"},t.title),h.a.createElement("div",null,"\u521b\u5efa\u4eba\uff1a",h.a.createElement("span",null,t.author.username)),h.a.createElement("div",null,"\u66f4\u65b0\u65f6\u95f4\uff1a",h.a.createElement("span",null,Object(f.a)(t.updatedAt))),h.a.createElement("div",{className:"like"},h.a.createElement("span",null,h.a.createElement("img",{alt:"vote",src:C.a})),h.a.createElement("span",null,t.vote)))},g=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.posts;return h.a.createElement("ul",null,e.map(function(e){return h.a.createElement(d.a,{key:e.id,to:"/posts/".concat(e.id)},h.a.createElement(m,{post:e}))}))}}]),t}(l.Component),A=n(33),v=n(31),b=n(30),O=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={posts:[],newPost:!1},n.handleCancel=n.handleCancel.bind(Object(u.a)(Object(u.a)(n))),n.handleSave=n.handleSave.bind(Object(u.a)(Object(u.a)(n))),n.handleNewPost=n.handleNewPost.bind(Object(u.a)(Object(u.a)(n))),n.refreshPostList=n.refreshPostList.bind(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.refreshPostList()}},{key:"refreshPostList",value:function(){var e=this;Object(v.a)(b.a.getPostList()).then(function(t){t.error||e.setState({posts:t,newPost:!1})})}},{key:"handleSave",value:function(e){var t=this,n=Object(a.a)({},e,{author:this.props.userId,vote:0});Object(v.b)(b.a.createPost(),n).then(function(e){e.error||t.refreshPostList()})}},{key:"handleCancel",value:function(){this.setState({newPost:!1})}},{key:"handleNewPost",value:function(){this.setState({newPost:!0})}},{key:"render",value:function(){var e=this.props.userId;return h.a.createElement("div",{className:"postList"},h.a.createElement("div",null,h.a.createElement("h2",null,"\u5e16\u5b50\u5217\u8868"),e?h.a.createElement("button",{onClick:this.handleNewPost},"\u53d1\u5e16"):null),this.state.newPost?h.a.createElement(A.a,{onSave:this.handleSave,onCancel:this.handleCancel}):null,h.a.createElement(g,{posts:this.state.posts}))}}]),t}(l.Component);t.default=O}}]);
//# sourceMappingURL=4.92f41d98.chunk.js.map