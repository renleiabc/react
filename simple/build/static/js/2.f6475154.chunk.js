(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{30:function(e,t,r){"use strict";var n={fields:["id","title","author","vote","updatedAt"],limit:10,order:"updatedAt DESC",include:"authorPointer",includefilter:{user:{fields:["id","username"]}}};function o(e){return encodeURIComponent(JSON.stringify(e))}t.a={login:function(){return"/user/login"},getPostList:function(){return"/post?filter=".concat(o(n))},getPostById:function(e){return"/post?filter=".concat(o(function(e){return{fields:["id","title","author","vote","updatedAt","content"],where:{id:e},include:"authorPointer",includefilter:{user:{fields:["id","username"]}}}}(e)))},createPost:function(){return"/post"},updatePost:function(e){return"/post/".concat(e)},getCommentList:function(e){return"/comment?filter=".concat(o(function(e){return{fields:["id","author","updatedAt","content"],where:{post:e},limit:20,order:"updatedAt DESC",include:"authorPointer",includefilter:{user:{fields:["id","username"]}}}}(e)))},createComment:function(){return"/comment"}}},31:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return c});var n=Date.now(),o=function(e){function t(e,t){return e<<t|e>>>32-t}function r(e){var t,r="";for(t=7;t>=0;t--)r+=(e>>>4*t&15).toString(16);return r}var n,o,a,s,i,c,u,l,f,p=new Array(80),h=1732584193,d=4023233417,m=2562383102,g=271733878,b=3285377520,C=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)).length,y=new Array;for(o=0;o<C-3;o+=4)a=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),y.push(a);switch(C%4){case 0:o=2147483648;break;case 1:o=e.charCodeAt(C-1)<<24|8388608;break;case 2:o=e.charCodeAt(C-2)<<24|e.charCodeAt(C-1)<<16|32768;break;case 3:o=e.charCodeAt(C-3)<<24|e.charCodeAt(C-2)<<16|e.charCodeAt(C-1)<<8|128}for(y.push(o);y.length%16!=14;)y.push(0);for(y.push(C>>>29),y.push(C<<3&4294967295),n=0;n<y.length;n+=16){for(o=0;o<16;o++)p[o]=y[n+o];for(o=16;o<=79;o++)p[o]=t(p[o-3]^p[o-8]^p[o-14]^p[o-16],1);for(s=h,i=d,c=m,u=g,l=b,o=0;o<=19;o++)f=t(s,5)+(i&c|~i&u)+l+p[o]+1518500249&4294967295,l=u,u=c,c=t(i,30),i=s,s=f;for(o=20;o<=39;o++)f=t(s,5)+(i^c^u)+l+p[o]+1859775393&4294967295,l=u,u=c,c=t(i,30),i=s,s=f;for(o=40;o<=59;o++)f=t(s,5)+(i&c|i&u|c&u)+l+p[o]+2400959708&4294967295,l=u,u=c,c=t(i,30),i=s,s=f;for(o=60;o<=79;o++)f=t(s,5)+(i^c^u)+l+p[o]+3395469782&4294967295,l=u,u=c,c=t(i,30),i=s,s=f;h=h+s&4294967295,d=d+i&4294967295,m=m+c&4294967295,g=g+u&4294967295,b=b+l&4294967295}return(f=r(h)+r(d)+r(m)+r(g)+r(b)).toLowerCase()}("A6053788184630UZ8B3F5860-2646-2C47-DC50-39106919B260UZ"+n)+"."+n,a=new Headers({"X-APICloud-AppId":"A6053788184630","X-APICloud-AppKey":o,Accept:"application/json","Content-Type":"application/json"});function s(e){return fetch(e,{method:"GET",headers:a}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function i(e,t){return fetch(e,{method:"POST",headers:a,body:JSON.stringify(t)}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function c(e,t){return fetch(e,{method:"PUT",headers:a,body:JSON.stringify(t)}).then(function(t){return u(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function u(e,t){return t.status<500?t.json():(console.error("Request failed. Url = ".concat(e," . Message = ").concat(t.statusText)),{error:{message:"Request failed due to server error "}})}},46:function(e,t,r){"use strict";r.r(t);var n=r(5),o=r(6),a=r(8),s=r(7),i=r(9),c=r(12),u=r(1),l=r.n(u),f=r(0),p=r.n(f),h=r(3),d=r.n(h),m=r(4),g=r.n(m),b=r(13),C=r(15),y=r.n(C),v={},w=0,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,r=v[t]||(v[t]={});if(r[e])return r[e];var n=y.a.compile(e);return w<1e4&&(r[e]=n,w++),n}(e)(t,{pretty:!0})},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){g()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(b.b)(e.to),r=Object(b.b)(this.props.to);Object(b.c)(t,r)?d()(!1,"You tried to redirect to the same route you're currently on: \""+r.pathname+r.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,r=e.to;return t?"string"===typeof r?S(r,t.params):j({},r,{pathname:S(r.pathname,t.params)}):r},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,r=this.computeTo(this.props);t?e.push(r):e.replace(r)},t.prototype.render=function(){return null},t}(l.a.Component);O.propTypes={computedMatch:p.a.object,push:p.a.bool,from:p.a.string,to:p.a.oneOfType([p.a.string,p.a.object]).isRequired},O.defaultProps={push:!1},O.contextTypes={router:p.a.shape({history:p.a.shape({push:p.a.func.isRequired,replace:p.a.func.isRequired}).isRequired,staticContext:p.a.object}).isRequired};var A=O,R=r(31),E=r(30),P=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(s.a)(t).call(this,e))).state={username:"jack",password:"123456",redirectToRferrer:!1},r.handleChange=r.handleChange.bind(Object(c.a)(Object(c.a)(r))),r.handleSubmit=r.handleSubmit.bind(Object(c.a)(Object(c.a)(r))),r}return Object(i.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){"username"===e.target.name?this.setState({username:e.target.value}):"password"===e.target.name?this.setState({password:e.target.value}):console.log("do nothing")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state.username,n=this.state.password;if(0!==r.length&&0!==n.length){var o={username:r,password:n};Object(R.b)(E.a.login(),o).then(function(e){console.log(e.userId),e.error?alert(e.error.message||"login failed"):(sessionStorage.setItem("userId",e.userId),sessionStorage.setItem("username",r),t.setState({redirectToRferrer:!0}))})}else alert("\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,t=this.state.redirectToRferrer;return console.log(t),console.log(this.props.location.state),t?l.a.createElement(A,{to:e}):l.a.createElement("div",{className:"login"},l.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"label-login"},l.a.createElement("span",null,"\u7528\u6237\u540d\uff1a"),l.a.createElement("input",{name:"username",type:"text",value:this.state.username,onChange:this.handleChange})),l.a.createElement("div",{className:"label-login"},l.a.createElement("span",null,"\u5bc6\u7801\uff1a"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),l.a.createElement("input",{type:"submit",value:"\u767b\u5f55",className:"submit-login"})))}}]),t}(u.Component);t.default=P}}]);
//# sourceMappingURL=2.f6475154.chunk.js.map