{"version":3,"sources":["utils/url.js","utils/request.js","utils/SHA1.js","../node_modules/react-router/es/generatePath.js","../node_modules/react-router/es/Redirect.js","../node_modules/react-router-dom/es/Redirect.js","components/Login.js"],"names":["postListFilter","fields","limit","order","include","includefilter","user","encodeFilter","filter","encodeURIComponent","JSON","stringify","__webpack_exports__","login","getPostList","concat","getPostById","id","where","postByIdFilter","createPost","updatePost","getCommentList","postId","post","commentListFilter","createComment","__webpack_require__","d","get","put","now","Date","secureAppKey","msg","rotate_left","n","s","cvt_hex","val","i","str","toString","blockstart","j","A","B","C","D","E","temp","W","Array","H0","H1","H2","H3","H4","msg_len","string","replace","utftext","length","c","charCodeAt","String","fromCharCode","Utf8Encode","word_array","push","toLowerCase","SHA1","AppId","headers","Headers","X-APICloud-AppId","X-APICloud-AppKey","Accept","Content-Type","url","fetch","method","then","response","handleResponse","catch","err","console","error","message","data","body","status","json","statusText","patternCache","cacheCount","es_generatePath","pattern","arguments","undefined","params","cacheKey","cache","compiledGenerator","path_to_regexp_default","a","compile","generatePath_compileGenerator","generator","pretty","_extends","Object","assign","target","source","key","prototype","hasOwnProperty","call","Redirect_Redirect","_React$Component","Redirect","instance","Constructor","TypeError","_classCallCheck","this","self","ReferenceError","_possibleConstructorReturn","apply","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","isStatic","context","router","staticContext","componentWillMount","browser_default","perform","componentDidMount","componentDidUpdate","prevProps","prevTo","es","to","nextTo","props","warning_default","pathname","search","computeTo","_ref","computedMatch","history","render","react_default","Component","propTypes","prop_types_default","object","bool","from","oneOfType","isRequired","defaultProps","contextTypes","shape","func","react_router_dom_es_Redirect","Login","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","username","password","redirectToRferrer","handleChange","bind","assertThisInitialized","handleSubmit","e","name","setState","log","_this2","preventDefault","userId","alert","sessionStorage","setItem","location","createElement","className","onSubmit","type","onChange"],"mappings":"yFACA,IAAMA,EAAiB,CACrBC,OAAQ,CAAC,KAAM,QAAS,SAAU,OAAQ,aAC1CC,MAAO,GACPC,MAAO,iBACPC,QAAS,gBACTC,cAAe,CAAEC,KAAM,CAAEL,OAAQ,CAAC,KAAM,eAqB1C,SAASM,EAAaC,GACpB,OAAOC,mBAAmBC,KAAKC,UAAUH,IAG5BI,EAAA,GAEbC,MAAO,iBAAM,eAEbC,YAAa,iCAAAC,OAAsBR,EAAaP,KAEhDgB,YAAa,SAAAC,GAAE,sBAAAF,OAAoBR,EA3Bd,SAAAU,GAAE,MAAK,CAC5BhB,OAAQ,CAAC,KAAM,QAAS,SAAU,OAAQ,YAAa,WACvDiB,MAAO,CAAED,GAAIA,GACbb,QAAS,gBACTC,cAAe,CAAEC,KAAM,CAAEL,OAAQ,CAAC,KAAM,eAuBQkB,CAAeF,MAE/DG,WAAY,iBAAM,SAElBC,WAAY,SAAAJ,GAAE,eAAAF,OAAaE,IAE3BK,eAAgB,SAAAC,GAAM,yBAAAR,OACDR,EA1BG,SAAAgB,GAAM,MAAK,CACnCtB,OAAQ,CAAC,KAAM,SAAU,YAAa,WACtCiB,MAAO,CAAEM,KAAMD,GACfrB,MAAO,GACPC,MAAO,iBACPC,QAAS,gBACTC,cAAe,CAAEC,KAAM,CAAEL,OAAQ,CAAC,KAAM,eAoBNwB,CAAkBF,MAEpDG,cAAe,iBAAM,8CC9CvBC,EAAAC,EAAAhB,EAAA,sBAAAiB,IAAAF,EAAAC,EAAAhB,EAAA,sBAAAY,IAAAG,EAAAC,EAAAhB,EAAA,sBAAAkB,IAEA,IAEIC,EAAMC,KAAKD,MACTE,ECCC,SAAcC,GACnB,SAASC,EAAYC,EAAGC,GAEtB,OADUD,GAAKC,EAAMD,IAAO,GAAKC,EAkBnC,SAASC,EAAQC,GACf,IACIC,EADAC,EAAM,GAIV,IAAKD,EAAI,EAAGA,GAAK,EAAGA,IAElBC,IADKF,IAAa,EAAJC,EAAU,IACfE,SAAS,IAEpB,OAAOD,EAyBT,IAAIE,EACAH,EAAGI,EAOHC,EAAGC,EAAGC,EAAGC,EAAGC,EAgHZC,EAtHAC,EAAI,IAAIC,MAAM,IACdC,EAAK,WACLC,EAAK,WACLC,EAAK,WACLC,EAAK,UACLC,EAAK,WAMLC,GAFJxB,EAjCA,SAAoByB,GAClBA,EAASA,EAAOC,QAAQ,QAAS,MAGjC,IAFA,IAAIC,EAAU,GAELzB,EAAI,EAAGA,EAAIuB,EAAOG,OAAQ1B,IAAK,CACtC,IAAI2B,EAAIJ,EAAOK,WAAW5B,GAEtB2B,EAAI,IACNF,GAAWI,OAAOC,aAAaH,GACtBA,EAAI,KAAOA,EAAI,MACxBF,GAAWI,OAAOC,aAAcH,GAAK,EAAK,KAC1CF,GAAWI,OAAOC,aAAkB,GAAJH,EAAU,OAE1CF,GAAWI,OAAOC,aAAcH,GAAK,GAAM,KAC3CF,GAAWI,OAAOC,aAAeH,GAAK,EAAK,GAAM,KACjDF,GAAWI,OAAOC,aAAkB,GAAJH,EAAU,MAI9C,OAAOF,EAcHM,CAAWjC,IAEC4B,OAEdM,EAAa,IAAIhB,MACrB,IAAKZ,EAAI,EAAGA,EAAIkB,EAAU,EAAGlB,GAAK,EAChCI,EACGV,EAAI8B,WAAWxB,IAAM,GACrBN,EAAI8B,WAAWxB,EAAI,IAAM,GACzBN,EAAI8B,WAAWxB,EAAI,IAAM,EAC1BN,EAAI8B,WAAWxB,EAAI,GACrB4B,EAAWC,KAAKzB,GAGlB,OAAQc,EAAU,GAChB,KAAK,EACHlB,EAAI,WACJ,MACF,KAAK,EACHA,EAAKN,EAAI8B,WAAWN,EAAU,IAAM,GAAM,QAC1C,MAEF,KAAK,EACHlB,EACGN,EAAI8B,WAAWN,EAAU,IAAM,GAC/BxB,EAAI8B,WAAWN,EAAU,IAAM,GAChC,MACF,MAEF,KAAK,EACHlB,EACGN,EAAI8B,WAAWN,EAAU,IAAM,GAC/BxB,EAAI8B,WAAWN,EAAU,IAAM,GAC/BxB,EAAI8B,WAAWN,EAAU,IAAM,EAChC,IAMN,IAFAU,EAAWC,KAAK7B,GAET4B,EAAWN,OAAS,IAAM,IAAIM,EAAWC,KAAK,GAKrD,IAHAD,EAAWC,KAAKX,IAAY,IAC5BU,EAAWC,KAAMX,GAAW,EAAK,YAE5Bf,EAAa,EAAGA,EAAayB,EAAWN,OAAQnB,GAAc,GAAI,CACrE,IAAKH,EAAI,EAAGA,EAAI,GAAIA,IAAKW,EAAEX,GAAK4B,EAAWzB,EAAaH,GACxD,IAAKA,EAAI,GAAIA,GAAK,GAAIA,IACpBW,EAAEX,GAAKL,EAAYgB,EAAEX,EAAI,GAAKW,EAAEX,EAAI,GAAKW,EAAEX,EAAI,IAAMW,EAAEX,EAAI,IAAK,GAQlE,IANAK,EAAIQ,EACJP,EAAIQ,EACJP,EAAIQ,EACJP,EAAIQ,EACJP,EAAIQ,EAECjB,EAAI,EAAGA,GAAK,GAAIA,IACnBU,EACGf,EAAYU,EAAG,IAAOC,EAAIC,GAAOD,EAAIE,GAAMC,EAAIE,EAAEX,GAAK,WACvD,WACFS,EAAID,EACJA,EAAID,EACJA,EAAIZ,EAAYW,EAAG,IACnBA,EAAID,EACJA,EAAIK,EAGN,IAAKV,EAAI,GAAIA,GAAK,GAAIA,IACpBU,EACGf,EAAYU,EAAG,IAAMC,EAAIC,EAAIC,GAAKC,EAAIE,EAAEX,GAAK,WAAc,WAC9DS,EAAID,EACJA,EAAID,EACJA,EAAIZ,EAAYW,EAAG,IACnBA,EAAID,EACJA,EAAIK,EAGN,IAAKV,EAAI,GAAIA,GAAK,GAAIA,IACpBU,EACGf,EAAYU,EAAG,IACZC,EAAIC,EAAMD,EAAIE,EAAMD,EAAIC,GAC1BC,EACAE,EAAEX,GACF,WACF,WACFS,EAAID,EACJA,EAAID,EACJA,EAAIZ,EAAYW,EAAG,IACnBA,EAAID,EACJA,EAAIK,EAGN,IAAKV,EAAI,GAAIA,GAAK,GAAIA,IACpBU,EACGf,EAAYU,EAAG,IAAMC,EAAIC,EAAIC,GAAKC,EAAIE,EAAEX,GAAK,WAAc,WAC9DS,EAAID,EACJA,EAAID,EACJA,EAAIZ,EAAYW,EAAG,IACnBA,EAAID,EACJA,EAAIK,EAGNG,EAAMA,EAAKR,EAAK,WAChBS,EAAMA,EAAKR,EAAK,WAChBS,EAAMA,EAAKR,EAAK,WAChBS,EAAMA,EAAKR,EAAK,WAChBS,EAAMA,EAAKR,EAAK,WAMlB,OAHIC,EACFZ,EAAQe,GAAMf,EAAQgB,GAAMhB,EAAQiB,GAAMjB,EAAQkB,GAAMlB,EAAQmB,IAEtDa,cDlLOC,CAAKC,yDAAuBzC,GAAK,IAAIA,EAEpD0C,EAAU,IAAIC,QAAQ,CAC1BC,mBANY,iBAOZC,oBAAqB3C,EACrB4C,OAAU,mBACVC,eAAgB,qBAGlB,SAASjD,EAAIkD,GACX,OAAOC,MAAMD,EAAK,CAChBE,OAAQ,MACRR,QAASA,IACRS,KAAK,SAAAC,GACN,OAAOC,EAAeL,EAAKI,KAC1BE,MAAM,SAAAC,GAEP,OADAC,QAAQC,MAAR,yBAAAzE,OAAuCgE,EAAvC,iBAAAhE,OAA0DuE,IACnD,CAACE,MAAO,CAACC,QAAS,sBAI7B,SAASjE,EAAKuD,EAAKW,GACjB,OAAOV,MAAMD,EAAK,CAChBE,OAAQ,OACRR,QAASA,EACTkB,KAAMjF,KAAKC,UAAU+E,KACpBR,KAAK,SAAAC,GACN,OAAOC,EAAeL,EAAKI,KAC1BE,MAAM,SAAAC,GAEP,OADAC,QAAQC,MAAR,yBAAAzE,OAAuCgE,EAAvC,iBAAAhE,OAA0DuE,IACnD,CAACE,MAAO,CAACC,QAAS,sBAI7B,SAAS3D,EAAIiD,EAAKW,GAChB,OAAOV,MAAMD,EAAK,CAChBE,OAAQ,MACRR,QAASA,EACTkB,KAAMjF,KAAKC,UAAU+E,KACpBR,KAAK,SAAAC,GACN,OAAOC,EAAeL,EAAKI,KAC1BE,MAAM,SAAAC,GAEP,OADAC,QAAQC,MAAR,yBAAAzE,OAAuCgE,EAAvC,iBAAAhE,OAA0DuE,IACnD,CAACE,MAAO,CAACC,QAAS,sBAI7B,SAASL,EAAeL,EAAKI,GAC3B,OAAGA,EAASS,OAAS,IACZT,EAASU,QAEhBN,QAAQC,MAAR,yBAAAzE,OAAuCgE,EAAvC,iBAAAhE,OAA0DoE,EAASW,aAC5D,CAACN,MAAO,CAACC,QAAS,0NExD7BM,EAAA,GAEAC,EAAA,EAkCeC,EAdf,WACA,IAAAC,EAAAC,UAAArC,OAAA,QAAAsC,IAAAD,UAAA,GAAAA,UAAA,OACAE,EAAAF,UAAArC,OAAA,QAAAsC,IAAAD,UAAA,GAAAA,UAAA,MAEA,YAAAD,EACAA,EAvBoB,SAAAA,GACpB,IAAAI,EAAAJ,EACAK,EAAAR,EAAAO,KAAAP,EAAAO,GAAA,IACA,GAAAC,EAAAL,GAAA,OAAAK,EAAAL,GACA,IAAAM,EAA0BC,EAAAC,EAAYC,QAAAT,GAOtC,OALAF,EATA,MAUAO,EAAAL,GAAAM,EACAR,KAGAQ,EAekBI,CAAgBV,EAClCW,CAAAR,EAAA,CACAS,QAAA,KCjCAC,EAAAC,OAAAC,QAAA,SAAAC,GACA,QAAA1E,EAAA,EAAiBA,EAAA2D,UAAArC,OAAsBtB,IAAA,CACvC,IAAA2E,EAAAhB,UAAA3D,GAEA,QAAA4E,KAAAD,EACAH,OAAAK,UAAAC,eAAAC,KAAAJ,EAAAC,KACAF,EAAAE,GAAAD,EAAAC,IAKA,OAAAF,GA4CA,IAAIM,EAAQ,SAAAC,GAGZ,SAAAC,IAGA,OA/CA,SAAAC,EAAAC,GACA,KAAAD,aAAAC,GACA,UAAAC,UAAA,qCA2CAC,CAAAC,KAAAL,GAvCA,SAAAM,EAAAT,GACA,IAAAS,EACA,UAAAC,eAAA,6DAGA,OAAAV,GAAA,kBAAAA,GAAA,oBAAAA,EAAAS,EAAAT,EAoCAW,CAAAH,KAAAN,EAAAU,MAAAJ,KAAA5B,YA6DA,OA9FA,SAAAiC,EAAAC,GACA,uBAAAA,GAAA,OAAAA,EACA,UAAAR,UAAA,kEAAAQ,GAGAD,EAAAf,UAAAL,OAAAsB,OAAAD,KAAAhB,UAAA,CACAkB,YAAA,CACAC,MAAAJ,EACAK,YAAA,EACAC,UAAA,EACAC,cAAA,KAGAN,IAAArB,OAAA4B,eAAA5B,OAAA4B,eAAAR,EAAAC,GAAAD,EAAAS,UAAAR,GAeAS,CAAApB,EAAAD,GAQAC,EAAAL,UAAA0B,SAAA,WACA,OAAAhB,KAAAiB,QAAAC,QAAAlB,KAAAiB,QAAAC,OAAAC,eAGAxB,EAAAL,UAAA8B,mBAAA,WACIC,IAASrB,KAAAiB,QAAAC,OAAA,oDACblB,KAAAgB,YAAAhB,KAAAsB,WAGA3B,EAAAL,UAAAiC,kBAAA,WACAvB,KAAAgB,YAAAhB,KAAAsB,WAGA3B,EAAAL,UAAAkC,mBAAA,SAAAC,GACA,IAAAC,EAAiBzC,OAAA0C,EAAA,EAAA1C,CAAcwC,EAAAG,IAC/BC,EAAiB5C,OAAA0C,EAAA,EAAA1C,CAAce,KAAA8B,MAAAF,IAEvB3C,OAAA0C,EAAA,EAAA1C,CAAiByC,EAAAG,GACnBE,KAAO,oEAAAF,EAAAG,SAAAH,EAAAI,OAAA,KAIbjC,KAAAsB,WAGA3B,EAAAL,UAAA4C,UAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAC,cACAR,EAAAO,EAAAP,GAEA,OAAAQ,EACA,kBAAAR,EACe1D,EAAY0D,EAAAQ,EAAA9D,QAE3BU,EAAA,GAA0B4C,EAAA,CAC1BI,SAAoB9D,EAAY0D,EAAAI,SAAAI,EAAA9D,UAKhCsD,GAGAjC,EAAAL,UAAAgC,QAAA,WACA,IAAAe,EAAArC,KAAAiB,QAAAC,OAAAmB,QACA/F,EAAA0D,KAAA8B,MAAAxF,KACAsF,EAAA5B,KAAAkC,UAAAlC,KAAA8B,OAEAxF,EACA+F,EAAA/F,KAAAsF,GAEAS,EAAAxG,QAAA+F,IAIAjC,EAAAL,UAAAgD,OAAA,WACA,aAGA3C,EAnEY,CAoEV4C,EAAA5D,EAAK6D,WAEP/C,EAAQgD,UAAA,CACRL,cAAiBM,EAAA/D,EAASgE,OAE1BrG,KAAQoG,EAAA/D,EAASiE,KACjBC,KAAQH,EAAA/D,EAAS/C,OACjBgG,GAAMc,EAAA/D,EAASmE,UAAA,CAAYJ,EAAA/D,EAAS/C,OAAS8G,EAAA/D,EAASgE,SAAAI,YAEtDtD,EAAQuD,aAAA,CACR1G,MAAA,GAEAmD,EAAQwD,aAAA,CACR/B,OAAUwB,EAAA/D,EAASuE,MAAA,CACnBb,QAAaK,EAAA/D,EAASuE,MAAA,CACtB5G,KAAYoG,EAAA/D,EAASwE,KAAAJ,WACrBlH,QAAe6G,EAAA/D,EAASwE,KAAAJ,aACnBA,WACL5B,cAAmBuB,EAAA/D,EAASgE,SACzBI,YAEY,IC9IAK,ED8IA,kBE5ITC,cACJ,SAAAA,EAAYvB,GAAO,IAAAwB,EAAA,OAAArE,OAAAsE,EAAA,EAAAtE,CAAAe,KAAAqD,IACjBC,EAAArE,OAAAuE,EAAA,EAAAvE,CAAAe,KAAAf,OAAAwE,EAAA,EAAAxE,CAAAoE,GAAA7D,KAAAQ,KAAM8B,KACD4B,MAAQ,CACXC,SAAU,OACVC,SAAU,SACVC,mBAAmB,GAErBP,EAAKQ,aAAeR,EAAKQ,aAAaC,KAAlB9E,OAAA+E,EAAA,EAAA/E,QAAA+E,EAAA,EAAA/E,CAAAqE,KACpBA,EAAKW,aAAeX,EAAKW,aAAaF,KAAlB9E,OAAA+E,EAAA,EAAA/E,QAAA+E,EAAA,EAAA/E,CAAAqE,KARHA,4EAWNY,GACW,aAAlBA,EAAE/E,OAAOgF,KACXnE,KAAKoE,SAAS,CACZT,SAAUO,EAAE/E,OAAOsB,QAEM,aAAlByD,EAAE/E,OAAOgF,KAClBnE,KAAKoE,SAAS,CACZR,SAAUM,EAAE/E,OAAOsB,QAGrBjD,QAAQ6G,IAAI,mDAIHH,GAAG,IAAAI,EAAAtE,KACdkE,EAAEK,iBACF,IAAMZ,EAAW3D,KAAK0D,MAAMC,SACtBC,EAAW5D,KAAK0D,MAAME,SAC5B,GAAwB,IAApBD,EAAS5H,QAAoC,IAApB6H,EAAS7H,OAAtC,CAIA,IAAMuC,EAAS,CACbqF,WACAC,YAEFnK,YAAKuD,IAAIlE,QAASwF,GAAQnB,KAAK,SAAAQ,GAC7BH,QAAQ6G,IAAI1G,EAAK6G,QACb7G,EAAKF,MACPgH,MAAM9G,EAAKF,MAAMC,SAAW,iBAG5BgH,eAAeC,QAAQ,SAAUhH,EAAK6G,QACtCE,eAAeC,QAAQ,WAAYhB,GACnCW,EAAKF,SAAS,CACZP,mBAAmB,YAhBvBY,MAAM,uGAqBD,IAEC5B,GAAS7C,KAAK8B,MAAM8C,SAASlB,OAAS,CAAEb,KAAM,CAAEb,SAAU,OAA1Da,KACAgB,EAAsB7D,KAAK0D,MAA3BG,kBAGR,OAFArG,QAAQ6G,IAAIR,GACZrG,QAAQ6G,IAAIrE,KAAK8B,MAAM8C,SAASlB,OAC5BG,EACKtB,EAAA5D,EAAAkG,cAACzB,EAAD,CAAUxB,GAAIiB,IAGrBN,EAAA5D,EAAAkG,cAAA,OAAKC,UAAU,SACbvC,EAAA5D,EAAAkG,cAAA,QAAMC,UAAU,aAAaC,SAAU/E,KAAKiE,cAC1C1B,EAAA5D,EAAAkG,cAAA,OAAKC,UAAU,eACbvC,EAAA5D,EAAAkG,cAAA,wCACAtC,EAAA5D,EAAAkG,cAAA,SACEV,KAAK,WACLa,KAAK,OACLvE,MAAOT,KAAK0D,MAAMC,SAClBsB,SAAUjF,KAAK8D,gBAGnBvB,EAAA5D,EAAAkG,cAAA,OAAKC,UAAU,eACbvC,EAAA5D,EAAAkG,cAAA,kCACAtC,EAAA5D,EAAAkG,cAAA,SACEG,KAAK,WACLb,KAAK,WACL1D,MAAOT,KAAK0D,MAAME,SAClBqB,SAAUjF,KAAK8D,gBAGnBvB,EAAA5D,EAAAkG,cAAA,SAAOG,KAAK,SAASvE,MAAM,eAAKqE,UAAU,0BAlFhCtC,aAyFLa","file":"static/js/2.f6475154.chunk.js","sourcesContent":["// 获取帖子列表的过滤条件\nconst postListFilter = {\n  fields: [\"id\", \"title\", \"author\", \"vote\", \"updatedAt\"],\n  limit: 10,\n  order: \"updatedAt DESC\",\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n};\n\n// 获取帖子详情的过滤条件\nconst postByIdFilter = id => ({\n  fields: [\"id\", \"title\", \"author\", \"vote\", \"updatedAt\", \"content\"],\n  where: { id: id },\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n});\n\n// 获取评论列表的过滤条件\nconst commentListFilter = postId => ({\n  fields: [\"id\", \"author\", \"updatedAt\", \"content\"],\n  where: { post: postId },\n  limit: 20,\n  order: \"updatedAt DESC\",\n  include: \"authorPointer\",\n  includefilter: { user: { fields: [\"id\", \"username\"] } }\n});\n\nfunction encodeFilter(filter) {\n  return encodeURIComponent(JSON.stringify(filter));\n}\n\nexport default {\n  // 登录\n  login: () => \"/user/login\",\n  // 获取帖子列表\n  getPostList: () => `/post?filter=${encodeFilter(postListFilter)}`,\n  // 获取帖子详情\n  getPostById: id => `/post?filter=${encodeFilter(postByIdFilter(id))}`,\n  // 新建帖子\n  createPost: () => \"/post\",\n  // 修改帖子\n  updatePost: id => `/post/${id}`,\n  // 获取评论列表\n  getCommentList: postId =>\n    `/comment?filter=${encodeFilter(commentListFilter(postId))}`,\n  // 新建评论  \n  createComment: () => \"/comment\"\n};\n","import {SHA1} from \"./SHA1\";\n\nconst AppId = \"A6053788184630\";\nconst AppKey = \"8B3F5860-2646-2C47-DC50-39106919B260\";\nvar now = Date.now();\nconst secureAppKey = SHA1(AppId+\"UZ\"+AppKey+\"UZ\"+now)+\".\"+now;\n\nconst headers = new Headers({\n  \"X-APICloud-AppId\": AppId,\n  \"X-APICloud-AppKey\": secureAppKey,\n  \"Accept\": \"application/json\",\n  \"Content-Type\": \"application/json\"\n});\n\nfunction get(url) {\n  return fetch(url, {\n    method: \"GET\",\n    headers: headers,\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction post(url, data) {\n  return fetch(url, {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify(data)\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction put(url, data) {\n  return fetch(url, {\n    method: \"PUT\",\n    headers: headers,\n    body: JSON.stringify(data)\n  }).then(response => {\n    return handleResponse(url, response);\n  }).catch(err => {\n    console.error(`Request failed. Url = ${url} . Message = ${err}`);\n    return {error: {message: \"Request failed.\"}};\n  })\n}\n\nfunction handleResponse(url, response) {\n  if(response.status < 500){\n    return response.json();\n  }else{\n    console.error(`Request failed. Url = ${url} . Message = ${response.statusText}`);\n    return {error: {message: \"Request failed due to server error \"}};\n  }\n}\n\nexport {get, post, put}","/* eslint-disable */\n/**\n *\n *  Secure Hash Algorithm (SHA1)\n *\n **/\nexport function SHA1(msg) {\n  function rotate_left(n, s) {\n    var t4 = (n << s) | (n >>> (32 - s));\n    return t4;\n  }\n\n  function lsb_hex(val) {\n    var str = \"\";\n    var i;\n    var vh;\n    var vl;\n\n    for (i = 0; i <= 6; i += 2) {\n      vh = (val >>> (i * 4 + 4)) & 0x0f;\n      vl = (val >>> (i * 4)) & 0x0f;\n      str += vh.toString(16) + vl.toString(16);\n    }\n    return str;\n  }\n\n  function cvt_hex(val) {\n    var str = \"\";\n    var i;\n    var v;\n\n    for (i = 7; i >= 0; i--) {\n      v = (val >>> (i * 4)) & 0x0f;\n      str += v.toString(16);\n    }\n    return str;\n  }\n\n  function Utf8Encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if (c > 127 && c < 2048) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      } else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n\n    return utftext;\n  }\n\n  var blockstart;\n  var i, j;\n  var W = new Array(80);\n  var H0 = 0x67452301;\n  var H1 = 0xefcdab89;\n  var H2 = 0x98badcfe;\n  var H3 = 0x10325476;\n  var H4 = 0xc3d2e1f0;\n  var A, B, C, D, E;\n  var temp;\n\n  msg = Utf8Encode(msg);\n\n  var msg_len = msg.length;\n\n  var word_array = new Array();\n  for (i = 0; i < msg_len - 3; i += 4) {\n    j =\n      (msg.charCodeAt(i) << 24) |\n      (msg.charCodeAt(i + 1) << 16) |\n      (msg.charCodeAt(i + 2) << 8) |\n      msg.charCodeAt(i + 3);\n    word_array.push(j);\n  }\n\n  switch (msg_len % 4) {\n    case 0:\n      i = 0x080000000;\n      break;\n    case 1:\n      i = (msg.charCodeAt(msg_len - 1) << 24) | 0x0800000;\n      break;\n\n    case 2:\n      i =\n        (msg.charCodeAt(msg_len - 2) << 24) |\n        (msg.charCodeAt(msg_len - 1) << 16) |\n        0x08000;\n      break;\n\n    case 3:\n      i =\n        (msg.charCodeAt(msg_len - 3) << 24) |\n        (msg.charCodeAt(msg_len - 2) << 16) |\n        (msg.charCodeAt(msg_len - 1) << 8) |\n        0x80;\n      break;\n  }\n\n  word_array.push(i);\n\n  while (word_array.length % 16 != 14) word_array.push(0);\n\n  word_array.push(msg_len >>> 29);\n  word_array.push((msg_len << 3) & 0x0ffffffff);\n\n  for (blockstart = 0; blockstart < word_array.length; blockstart += 16) {\n    for (i = 0; i < 16; i++) W[i] = word_array[blockstart + i];\n    for (i = 16; i <= 79; i++)\n      W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n    A = H0;\n    B = H1;\n    C = H2;\n    D = H3;\n    E = H4;\n\n    for (i = 0; i <= 19; i++) {\n      temp =\n        (rotate_left(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5a827999) &\n        0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 20; i <= 39; i++) {\n      temp =\n        (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ed9eba1) & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 40; i <= 59; i++) {\n      temp =\n        (rotate_left(A, 5) +\n          ((B & C) | (B & D) | (C & D)) +\n          E +\n          W[i] +\n          0x8f1bbcdc) &\n        0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 60; i <= 79; i++) {\n      temp =\n        (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0xca62c1d6) & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotate_left(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    H0 = (H0 + A) & 0x0ffffffff;\n    H1 = (H1 + B) & 0x0ffffffff;\n    H2 = (H2 + C) & 0x0ffffffff;\n    H3 = (H3 + D) & 0x0ffffffff;\n    H4 = (H4 + E) & 0x0ffffffff;\n  }\n\n  var temp =\n    cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);\n\n  return temp.toLowerCase();\n}\n","import pathToRegexp from \"path-to-regexp\";\nvar patternCache = {};\nvar cacheLimit = 10000;\nvar cacheCount = 0;\n\nvar compileGenerator = function compileGenerator(pattern) {\n  var cacheKey = pattern;\n  var cache = patternCache[cacheKey] || (patternCache[cacheKey] = {});\n  if (cache[pattern]) return cache[pattern];\n  var compiledGenerator = pathToRegexp.compile(pattern);\n\n  if (cacheCount < cacheLimit) {\n    cache[pattern] = compiledGenerator;\n    cacheCount++;\n  }\n\n  return compiledGenerator;\n};\n/**\n * Public API for generating a URL pathname from a pattern and parameters.\n */\n\n\nvar generatePath = function generatePath() {\n  var pattern = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"/\";\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (pattern === \"/\") {\n    return pattern;\n  }\n\n  var generator = compileGenerator(pattern);\n  return generator(params, {\n    pretty: true\n  });\n};\n\nexport default generatePath;","var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport warning from \"warning\";\nimport invariant from \"invariant\";\nimport { createLocation, locationsAreEqual } from \"history\";\nimport generatePath from \"./generatePath\";\n/**\n * The public API for updating the location programmatically\n * with a component.\n */\n\nvar Redirect = function (_React$Component) {\n  _inherits(Redirect, _React$Component);\n\n  function Redirect() {\n    _classCallCheck(this, Redirect);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  Redirect.prototype.isStatic = function isStatic() {\n    return this.context.router && this.context.router.staticContext;\n  };\n\n  Redirect.prototype.componentWillMount = function componentWillMount() {\n    invariant(this.context.router, \"You should not use <Redirect> outside a <Router>\");\n    if (this.isStatic()) this.perform();\n  };\n\n  Redirect.prototype.componentDidMount = function componentDidMount() {\n    if (!this.isStatic()) this.perform();\n  };\n\n  Redirect.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var prevTo = createLocation(prevProps.to);\n    var nextTo = createLocation(this.props.to);\n\n    if (locationsAreEqual(prevTo, nextTo)) {\n      warning(false, \"You tried to redirect to the same route you're currently on: \" + (\"\\\"\" + nextTo.pathname + nextTo.search + \"\\\"\"));\n      return;\n    }\n\n    this.perform();\n  };\n\n  Redirect.prototype.computeTo = function computeTo(_ref) {\n    var computedMatch = _ref.computedMatch,\n        to = _ref.to;\n\n    if (computedMatch) {\n      if (typeof to === \"string\") {\n        return generatePath(to, computedMatch.params);\n      } else {\n        return _extends({}, to, {\n          pathname: generatePath(to.pathname, computedMatch.params)\n        });\n      }\n    }\n\n    return to;\n  };\n\n  Redirect.prototype.perform = function perform() {\n    var history = this.context.router.history;\n    var push = this.props.push;\n    var to = this.computeTo(this.props);\n\n    if (push) {\n      history.push(to);\n    } else {\n      history.replace(to);\n    }\n  };\n\n  Redirect.prototype.render = function render() {\n    return null;\n  };\n\n  return Redirect;\n}(React.Component);\n\nRedirect.propTypes = {\n  computedMatch: PropTypes.object,\n  // private, from <Switch>\n  push: PropTypes.bool,\n  from: PropTypes.string,\n  to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired\n};\nRedirect.defaultProps = {\n  push: false\n};\nRedirect.contextTypes = {\n  router: PropTypes.shape({\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n      replace: PropTypes.func.isRequired\n    }).isRequired,\n    staticContext: PropTypes.object\n  }).isRequired\n};\nexport default Redirect;","// Written in this round about way for babel-transform-imports\nimport Redirect from \"react-router/es/Redirect\";\nexport default Redirect;","import React, { Component } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { post } from '../utils/request'\r\nimport url from '../utils/url'\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      username: 'jack',\r\n      password: '123456',\r\n      redirectToRferrer: false // 是否重定向到之前的页面\r\n    }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n  // 处理用户名、密码的变化\r\n  handleChange(e) {\r\n    if (e.target.name === 'username') {\r\n      this.setState({\r\n        username: e.target.value\r\n      })\r\n    } else if (e.target.name === 'password') {\r\n      this.setState({\r\n        password: e.target.value\r\n      })\r\n    } else {\r\n      console.log('do nothing')\r\n    }\r\n  }\r\n  /// 提交登录表单\r\n  handleSubmit(e) {\r\n    e.preventDefault()\r\n    const username = this.state.username\r\n    const password = this.state.password\r\n    if (username.length === 0 || password.length === 0) {\r\n      alert('用户名或者密码不能为空')\r\n      return\r\n    }\r\n    const params = {\r\n      username,\r\n      password\r\n    }\r\n    post(url.login(), params).then(data => {\r\n      console.log(data.userId)\r\n      if (data.error) {\r\n        alert(data.error.message || 'login failed')\r\n      } else {\r\n        // 保存登录信息到sessionStorage\r\n        sessionStorage.setItem('userId', data.userId)\r\n        sessionStorage.setItem('username', username)\r\n        this.setState({\r\n          redirectToRferrer: true\r\n        })\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    // from 保存跳转到登录页前的页面路径， 用于在登录成功后重定向到原来的页面\r\n    const { from } = this.props.location.state || { from: { pathname: '/' } }\r\n    const { redirectToRferrer } = this.state\r\n    console.log(redirectToRferrer)\r\n    console.log(this.props.location.state)\r\n    if (redirectToRferrer) {\r\n      return <Redirect to={from} />\r\n    }\r\n    return (\r\n      <div className=\"login\">\r\n        <form className=\"login-form\" onSubmit={this.handleSubmit}>\r\n          <div className=\"label-login\">\r\n            <span>用户名：</span>\r\n            <input\r\n              name=\"username\"\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"label-login\">\r\n            <span>密码：</span>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <input type=\"submit\" value=\"登录\" className=\"submit-login\" />\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login\r\n"],"sourceRoot":""}